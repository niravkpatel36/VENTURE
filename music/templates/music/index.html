<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Venture</title>

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap');

    body {
      font-family: "Poppins", sans-serif;
      margin: 0;
      color: #fff;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      position: relative;
      overflow-x: hidden;
    }

    #background {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      background: #0a0a0a;
    }

    header {
      width: 100%;
      text-align: center;
      padding: 2.5rem 1rem;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(6px);
      box-shadow: 0 3px 10px rgba(0,0,0,0.3);
    }

    header h1 {
      font-size: 2.8rem;
      letter-spacing: 1.5px;
      color: #fff;
      text-shadow: 0 0 10px rgba(255, 140, 0, 0.4);
      margin-bottom: 0.4rem;
    }

    header p {
      font-size: 1.1rem;
      color: #f3f4f6;
      margin: 0;
    }

    .home-link {
      margin-top: 1rem;
      display: inline-block;
      color: #ffa500;
      text-decoration: none;
      font-weight: 500;
      transition: color 0.3s ease;
    }
    .home-link:hover { color: #ffcc66; }

    .search {
      margin: 2.5rem auto;
      text-align: center;
      width: 100%;
    }

    form {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 0.5rem;
    }

    input[type="search"] {
      width: 50%;
      min-width: 250px;
      padding: 12px 14px;
      border-radius: 8px;
      border: none;
      outline: none;
      font-size: 1rem;
      color: #333;
    }

    button {
      background: #ff8c00;
      color: white;
      padding: 12px 18px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1rem;
      transition: all 0.3s ease;
    }

    button:hover {
      background: #ffa733;
      transform: translateY(-2px);
    }

    .results-container {
      width: 90%;
      max-width: 1200px;
      margin-bottom: 4rem;
    }

    h2 {
      text-align: center;
      font-weight: 500;
      color: #f5f5f5;
      text-shadow: 0 0 10px rgba(255, 140, 0, 0.4);
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(230px, 1fr));
      gap: 20px;
      margin-top: 1.5rem;
    }

    .card {
      background: rgba(255, 255, 255, 0.08);
      border-radius: 14px;
      padding: 15px;
      text-align: center;
      transition: all 0.3s ease;
      backdrop-filter: blur(4px);
    }

    .card:hover {
      background: rgba(255, 255, 255, 0.15);
      transform: translateY(-4px);
    }

    .card img {
      width: 100%;
      border-radius: 10px;
      margin-bottom: 10px;
    }

    .song-title {
      font-weight: 600;
      font-size: 1.05rem;
      color: #fff;
    }

    .meta {
      font-size: 0.9rem;
      color: #ddd;
      margin: 5px 0;
    }

    .links {
      margin-top: 6px;
    }

    .links a {
      color: #ff8c00;
      text-decoration: none;
      font-weight: 500;
      margin: 0 5px;
      transition: color 0.3s ease;
    }
    .links a:hover { color: #ffd27f; }

    audio {
      width: 100%;
      margin-top: 8px;
      border-radius: 8px;
    }

    .error {
      color: #ef4444;
      text-align: center;
    }

    @media (max-width: 600px) {
      header h1 { font-size: 2.1rem; }
      input[type="search"] { width: 85%; }
    }

@media (max-width: 1024px) {
  header h1 {
    font-size: 2.3rem;
  }

  header p {
    font-size: 1rem;
  }

  input[type="search"] {
    width: 70%;
  }
}

@media (max-width: 768px) {
  header {
    padding: 2rem 1rem;
  }

  header h1 {
    font-size: 2rem;
  }

  header p {
    font-size: 1rem;
  }

  form {
    flex-direction: column;
    align-items: center;
    gap: 0.8rem;
  }

  input[type="search"] {
    width: 85%;
    min-width: unset;
  }

  button {
    width: 70%;
    max-width: 250px;
  }

  .results-container {
    width: 95%;
  }

  .grid {
    grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
    gap: 16px;
  }

  .card {
    padding: 12px;
  }

  .song-title {
    font-size: 0.95rem;
  }
}

@media (max-width: 480px) {
  header h1 {
    font-size: 1.8rem;
  }

  header p {
    font-size: 0.95rem;
  }

  input[type="search"],
  button {
    width: 90%;
    font-size: 0.95rem;
  }

  .grid {
    grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
  }

  .card {
    padding: 10px;
  }
}

  </style>
</head>

<body>
  <canvas id="background"></canvas>

  <header>
    <h1>VENTURE</h1>
    <p>Find the soundtrack to your story</p>
    <a href="/" class="home-link">← Back to Home</a>
  </header>

  <section class="search">
    <form method="get" action=".">
      <input type="search" name="q" placeholder="Search songs, artists, or albums..." value="{{ query|default_if_none:'' }}" required>
      <button type="submit">Search</button>
    </form>
  </section>

  <div class="results-container">
    {% if error %}
      <p class="error">Error: {{ error }}</p>
    {% endif %}

    {% if results %}
      <h2>Results for "{{ query }}"</h2>
      <div class="grid">
        {% for t in results %}
          <div class="card">
            {% if t.album_image %}
              <img src="{{ t.album_image }}" alt="album cover">
            {% endif %}
            <p class="song-title">{{ t.name }}</p>
            <div class="meta">{{ t.artists }} — <em>{{ t.album_name }}</em></div>
            {% if t.preview_url %}
              <audio controls>
                <source src="{{ t.preview_url }}" type="audio/mpeg">
                Your browser does not support the audio element.
              </audio>
            {% endif %}
            <div class="links">
              <a href="{% url 'music:artist_detail' t.artist_id %}?q={{ query }}">Artist</a> |
              <a href="{% url 'music:album_detail' t.album_id %}?q={{ query }}">Album</a> |
              <a href="{{ t.spotify_url }}" target="_blank">Spotify</a>

            </div>
          </div>
        {% endfor %}
      </div>
    {% elif query %}
      <p style="text-align:center;">No results found.</p>
    {% endif %}
  </div>

  <script>
  const canvas = document.getElementById('background');
  const ctx = canvas.getContext('2d');
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;

  const stars = Array.from({ length: 80 }).map(() => ({
    x: Math.random() * canvas.width,
    y: Math.random() * canvas.height,
    r: Math.random() * 1.5 + 0.5,
    dx: (Math.random() - 0.5) * 0.4,
    dy: (Math.random() - 0.5) * 0.4,
  }));

  function animate() {
    ctx.fillStyle = 'rgba(0, 0, 0, 0.45)';
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    ctx.fillStyle = 'rgba(255, 140, 0, 0.85)';
    stars.forEach(s => {
      ctx.beginPath();
      ctx.arc(s.x, s.y, s.r, 0, Math.PI * 2);
      ctx.fill();
      s.x += s.dx;
      s.y += s.dy;
      if (s.x < 0 || s.x > canvas.width) s.dx *= -1;
      if (s.y < 0 || s.y > canvas.height) s.dy *= -1;
    });
    requestAnimationFrame(animate);
  }
  animate();

  window.addEventListener('resize', () => {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
  });
  </script>
</body>
</html>
